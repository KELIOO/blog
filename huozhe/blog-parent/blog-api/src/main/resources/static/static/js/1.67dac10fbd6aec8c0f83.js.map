{"version":3,"sources":["webpack:///src/views/MessageBoard.vue","webpack:///./src/api/messageBoard.js","webpack:///./src/views/MessageBoard.vue?240c","webpack:///./src/views/MessageBoard.vue"],"names":["MessageBoard","data","nickName","this","$store","state","name","id","message","total","currentpage","pagesize","ticket","pageTicket","created","doQuery","methods","_this","request","url","then","length","getPageInfo","submitMessage","nickname","content","_this2","replace","$message","type","showClose","method","result","code","i","push","handleSizeChange","size","handleCurrentChange","pageNumber","deleted","_this3","deleteById","views_MessageBoard","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","shadow","infinite-scroll-disabled","_l","item","index","key","timestamp","createDate","placement","_v","_s","staticStyle","color","on","click","$event","_e","current-page","page-size","layout","size-change","current-change","background-color","slot","rows","placeholder","maxlength","model","value","callback","$$v","expression","round","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/1.67dac10fbd6aec8c0f83.js","sourcesContent":["<template>\n  <div>\n    <el-card class=\"el-card-d\" shadow=\"always\">\n      <el-timeline infinite-scroll-disabled=\"disabled\">\n        <div v-if=\"pageTicket.length > 0\">\n          <el-timeline-item\n            v-for=\"(item, index) in pageTicket\"\n            :key=\"index\"\n            :timestamp=\"item.createDate\"\n            placement=\"top\"\n          >\n            <el-card class=\"el-card-m\">\n              <div class=\"el-card-m-nick-name\">\n                作者：{{ item.nickname }}\n                <button v-if=\" id === '1'\" @click=\"deleted(item.id)\" class=\"el-icon-delete\" style=\"color: red\"></button>\n              </div>\n              <span class=\"el-card-m-content\">{{ item.content }}</span>\n\n            </el-card>\n          </el-timeline-item>\n        </div>\n        <div v-else>\n          <el-timeline-item placement=\"top\">\n            <el-card class=\"el-card-m\">\n              <p class=\"el-card-m-nick-name\">  没有任何留言</p>\n            </el-card>\n          </el-timeline-item>\n        </div>\n      </el-timeline>\n      <el-pagination\n        @size-change=\"handleSizeChange\"\n        @current-change=\"handleCurrentChange\"\n        :current-page=\"currentpage\"\n        :page-size=\"pagesize\"\n        layout=\"total, prev, pager, next\"\n        :total=\"total\">\n      </el-pagination>\n\n    </el-card>\n    <div class=\"el-card-messages\">\n<!--      <el-input v-model=\"nickName\" size=\"mini\" class=\"message-nick-name\">\n        <template slot=\"prepend\">昵称：</template>\n      </el-input>-->\n      <el-input style=\"background-color: #8074c1\"\n        slot=\"prepend\"\n        v-model=\"message\"\n        type=\"textarea\"\n        :rows=\"2\"\n        class=\"message-text\"\n        placeholder=\"输入留言\"\n        maxlength=\"150\"\n      />\n\n      <el-button\n        type=\"info\"\n        round\n        class=\"submit-message\"\n        size=\"mini\"\n        @click=\"submitMessage\"\n      >留言</el-button>\n    </div>\n  </div>\n</template>\n\n<script>// 格式化时间函数\nimport { parseTime } from '@/utils/time'\nimport  {messageBoard,messageList,deleteById} from '@/api/messageBoard'\n\nexport default {\n\n  data() {\n    return {\n      nickName: this.$store.state.name,\n      id: this.$store.state.id,\n      message: '',\n      total: 0,  //总数据条数\n      currentpage: 1,  //当前所在页默认是第一页\n      pagesize: 3,  //每页显示多少行数据 默认设置为10\n      ticket: [],  //这里是从后端获取的所有数据\n      pageTicket: []//分页后的当前页数据\n    }\n  },\n  created() {\n    this.doQuery()\n  },\n  methods: {\n\n    doQuery() {\n      messageList().then(data => {\n          this.ticket = data.data\n          this.total = data.data.length\n          this.getPageInfo()\n      })\n    },\n    // 提交留言\n    submitMessage() {\n      /*if (this.nickName === '' || this.nickName.replace(/(^\\s*)|(\\s*$)/g, '') === '') {\n        this.$message('请输入昵称')\n        return\n      }*/\n      if (this.message === '' || this.message.replace(/(^\\s*)|(\\s*$)/g, '') === '') {\n        this.$message('留言不能为空')\n        return\n      }else if (this.$store.state.name ===''){\n        this.$message({message: '请先登录！', type: 'error', showClose: true})\n        this.message = ''\n        return;\n      }\n      messageBoard(this.nickName,this.message).then(result => {\n        if (result.code === 200) {\n          this.$message({message: '留言成功!', type: 'success', showClose: true});\n          this.message=''\n          this.doQuery()\n        } else {\n          this.$message({message: '留言失败！', type: 'error', showClose: true})\n        }\n      });\n    },\n    getPageInfo(){\n      //清空pageTicket中的数据\n      this.pageTicket=[];\n      // 获取当前页的数据\n      for(let i=(this.currentpage-1)*this.pagesize;i<this.total;i++){\n        //把遍历的数据添加到pageTicket里面\n        this.pageTicket.push(this.ticket[i]);\n        //判断是否达到一页的要求\n        if(this.pageTicket.length===this.pagesize) break;\n      }\n    },\n    //分页时修改每页的行数,这里会自动传入一个size\n    handleSizeChange(size){\n      //修改当前每页的数据行数\n      this.pagesize=size;\n      //数据重新分页\n      this.getPageInfo();\n    },\n    //调整当前的页码\n    handleCurrentChange(pageNumber){\n      //修改当前的页码\n      this.currentpage=pageNumber;\n      //数据重新分页\n      this.getPageInfo()\n    },\n    deleted(id) {\n      deleteById(id).then(data => {\n        if(data.code === 200){\n          this.$message({message: '删除成功!', type: 'success', showClose: true});\n          this.doQuery()\n        }else{\n          this.$message({message: '留言失败!', type: 'error', showClose: true});\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>.el-card-d {\n  float: left;\n  margin-top: 15px;\n  margin-left: 12%;\n  width: 1263px;\n  height: 500px;\n  background: rgb(252, 250, 250);\n}\n\n.el-card-m{\n  height: 100px;\n}\n\n.el-card-m-content{\n  display: block;\n  font-weight: bold;\n  margin-top: 10px;\n  word-break: break-all;\n  word-wrap: break-word\n}\n\n.el-card-m-nick-name{\n  display: block;\n  font-size: 15px;\n  color: #953f71;\n  font-weight: bolder;\n}\n\n.el-card-messages {\n  float: left;\n  margin-top: 20px;\n  margin-left: 12%;\n  width: 70%;\n\n}\n\n.message-nick-name {\n  width: 50%;\n}\n.message-text {\n  margin-top: 10px;\n  display: block;\n  width: 50%;\n\n}\n\n.submit-message {\n  margin-top: 10px;\n  width: 80px;\n  background: rgb(125, 113, 190);\n  color: cadetblue;\n  text-align: center;\n  letter-spacing: 20px;\n}\n.delete{\n  margin-left: 1000px;\n}\n\n</style>\n\n\n\n\n// WEBPACK FOOTER //\n// src/views/MessageBoard.vue","import request from '@/request'\n\nexport function messageBoard(nickname,content) {\n  const data = {\n    nickname,\n    content\n  }\n  return request({\n    url: '/message/add',\n    method: 'post',\n    data\n  })\n}\n\nexport function messageList() {\n  return request({\n      url: '/message/lists',\n      methods: 'get'\n  })\n}\nexport function deleteById(id) {\n  return request({\n      url: `/message/delete/${id}`,\n      method: 'post'\n  })\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/messageBoard.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('el-card',{staticClass:\"el-card-d\",attrs:{\"shadow\":\"always\"}},[_c('el-timeline',{attrs:{\"infinite-scroll-disabled\":\"disabled\"}},[(_vm.pageTicket.length > 0)?_c('div',_vm._l((_vm.pageTicket),function(item,index){return _c('el-timeline-item',{key:index,attrs:{\"timestamp\":item.createDate,\"placement\":\"top\"}},[_c('el-card',{staticClass:\"el-card-m\"},[_c('div',{staticClass:\"el-card-m-nick-name\"},[_vm._v(\"\\n                作者：\"+_vm._s(item.nickname)+\"\\n                \"),( _vm.id === '1')?_c('button',{staticClass:\"el-icon-delete\",staticStyle:{\"color\":\"red\"},on:{\"click\":function($event){return _vm.deleted(item.id)}}}):_vm._e()]),_vm._v(\" \"),_c('span',{staticClass:\"el-card-m-content\"},[_vm._v(_vm._s(item.content))])])],1)}),1):_c('div',[_c('el-timeline-item',{attrs:{\"placement\":\"top\"}},[_c('el-card',{staticClass:\"el-card-m\"},[_c('p',{staticClass:\"el-card-m-nick-name\"},[_vm._v(\"  没有任何留言\")])])],1)],1)]),_vm._v(\" \"),_c('el-pagination',{attrs:{\"current-page\":_vm.currentpage,\"page-size\":_vm.pagesize,\"layout\":\"total, prev, pager, next\",\"total\":_vm.total},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1),_vm._v(\" \"),_c('div',{staticClass:\"el-card-messages\"},[_c('el-input',{staticClass:\"message-text\",staticStyle:{\"background-color\":\"#8074c1\"},attrs:{\"slot\":\"prepend\",\"type\":\"textarea\",\"rows\":2,\"placeholder\":\"输入留言\",\"maxlength\":\"150\"},slot:\"prepend\",model:{value:(_vm.message),callback:function ($$v) {_vm.message=$$v},expression:\"message\"}}),_vm._v(\" \"),_c('el-button',{staticClass:\"submit-message\",attrs:{\"type\":\"info\",\"round\":\"\",\"size\":\"mini\"},on:{\"click\":_vm.submitMessage}},[_vm._v(\"留言\")])],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2894cb33\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/MessageBoard.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2894cb33\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./MessageBoard.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./MessageBoard.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./MessageBoard.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2894cb33\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./MessageBoard.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2894cb33\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/MessageBoard.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}